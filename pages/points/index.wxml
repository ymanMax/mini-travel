<view class="points-page">
  <!-- 顶部积分信息 -->
  <view class="points-header">
    <view class="points-balance">
      <view class="points-number">{{userPoints}}</view>
      <view class="points-label">积分余额</view>
    </view>
    <view class="points-level">
      <view class="level-number">Lv{{userLevel}}</view>
      <view class="level-label">会员等级</view>
    </view>
  </view>

  <!-- 签到按钮 -->
  <view class="sign-in-section">
    <button class="sign-in-btn" bindtap="signIn" disabled="{{hasSignedToday}}">
      <van-icon name="calendar-o" size="20" />
      <text>{{hasSignedToday ? '今日已签到' : '每日签到'}}</text>
    </button>
    <view class="sign-in-info">连续签到{{continuousSignDays}}天，额外奖励{{continuousReward}}积分</view>
  </view>

  <!-- 标签页切换 -->
  <view class="tab-bar">
    <view class="tab-item {{activeTab === 'records' ? 'active' : ''}}" bindtap="switchTab" data-tab="records">
      <text>积分获取记录</text>
    </view>
    <view class="tab-item {{activeTab === 'exchange' ? 'active' : ''}}" bindtap="switchTab" data-tab="exchange">
      <text>积分兑换</text>
    </view>
  </view>

  <!-- 积分获取记录 -->
  <view class="tab-content" wx:if="{{activeTab === 'records'}}">
    <view class="record-list">
      <view class="record-item" wx:for="{{pointsRecords}}" wx:key="id">
        <view class="record-info">
          <view class="record-title">{{item.title}}</view>
          <view class="record-time">{{item.time}}</view>
        </view>
        <view class="record-amount {{item.type === 'income' ? 'income' : 'expense'}}">
          {{item.type === 'income' ? '+' : '-'}}{{item.amount}}
        </view>
      </view>
    </view>
  </view>

  <!-- 积分兑换 -->
  <view class="tab-content" wx:if="{{activeTab === 'exchange'}}">
    <view class="exchange-list">
      <view class="exchange-item" wx:for="{{exchangeItems}}" wx:key="id">
        <image src="{{item.image}}" mode="aspectFill" class="item-image"></image>
        <view class="item-info">
          <view class="item-name">{{item.name}}</view>
          <view class="item-desc">{{item.description}}</view>
          <view class="item-price">
            <text class="points-required">需{{item.pointsRequired}}积分</text>
          </view>
        </view>
        <button class="exchange-btn" bindtap="exchangeItem" data-item="{{item}}">
          立即兑换
        </button>
      </view>
    </view>
  </view>
</view>