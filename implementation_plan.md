# 行程规划功能-实时社交分享与互动功能 实现计划

## 一、项目现状分析
- **技术框架**: 微信原生小程序 + Vant UI 组件库
- **现有页面**:
  - /pages/forum/index: 论坛列表页面，已有基础互动功能
  - /pages/add_comment/index: 发布评论页面，支持标题、景点、内容、单图上传
- **数据请求**: 目前使用真实接口，需改为 mock 形式

## 二、功能需求拆解与实现方案

### 需求1: 在论坛页面(/pages/forum/index)添加"发布游记"按钮，位于页面顶部
- **实现方案**: 在页面顶部导航栏下方添加按钮
- **修改文件**:
  - /pages/forum/index.wxml: 添加按钮
  - /pages/forum/index.wxss: 按钮样式
  - /pages/forum/index.js: 按钮点击事件，跳转到发布页面

### 需求2: 发布游记页面(/pages/add_comment/index)增强功能
- **子需求**:
  1. 支持多图上传（现有单图）
  2. 添加标签功能
  3. @好友功能
- **实现方案**:
  - 多图上传: 修改图片选择逻辑，支持多张图片
  - 标签功能: 添加标签输入框和选择器
  - @好友功能: 添加好友选择器或输入框
- **修改文件**:
  - /pages/add_comment/index.wxml: 添加新功能 UI
  - /pages/add_comment/index.wxss: 样式调整
  - /pages/add_comment/index.js: 功能逻辑实现

### 需求3: 游记详情页添加互动功能
- **子需求**:
  1. 点赞按钮
  2. 收藏按钮
  3. 评论按钮
  4. 分享按钮
- **实现方案**: 在详情页底部或顶部添加互动按钮栏
- **涉及页面**: 需要先确认游记详情页位置（可能是 forum 页面的子页面或 info_detail 页面）

### 需求4: 评论区域支持回复功能
- **子需求**:
  1. 可@其他用户
  2. 显示用户头像和昵称
- **实现方案**: 修改评论组件，支持层级回复和@功能
- **修改文件**: 评论相关组件或页面

### 需求5: 添加"生成游记海报"功能
- **子需求**:
  1. 用户可选择游记图片和文字
  2. 生成精美海报
  3. 支持分享到朋友圈
- **实现方案**: 使用 canvas 绘制海报，结合微信分享 API
- **修改文件**: 需要新增海报生成页面或组件

### 需求6: 所有接口调用通过数据mock形式交互
- **实现方案**:
  1. 创建 mock 数据文件
  2. 修改 app.js 中的请求方法，优先使用 mock 数据
  3. 为所有需要的接口创建 mock 数据
- **修改文件**:
  - app.js: 修改请求逻辑
  - 新增 mock 数据文件

## 三、实施步骤
1. **准备工作**: 创建 mock 数据结构，修改请求逻辑
2. **论坛页面优化**: 添加发布按钮
3. **发布页面增强**: 多图上传、标签、@好友
4. **游记详情页**: 添加互动功能
5. **评论系统**: 支持回复和@功能
6. **海报生成**: 新增功能
7. **测试**: 确保所有功能正常工作

## 四、注意事项
- 所有 mock 数据需模拟真实接口返回格式
- 界面设计需保持与现有风格一致
- 需考虑微信小程序的性能限制（如图片数量、canvas 尺寸）
- 所有交互需有适当的反馈（加载状态、成功/失败提示）
